## Components
<p align="center">
<img src="https://github.com/WatchPlant/OrangeBox/assets/18334507/ed1bf773-674e-463e-9d97-17d513f5f2e9" width="1000">
</p>

***
<p align="center">
<img src="https://github.com/WatchPlant/OrangeBox/assets/18334507/6567c6eb-300a-4746-803a-2705ed4a3343" width="700">
</p>


## Powering
The orange box system can be (simultaneously) powered from multiple sources:
- solar panels,
- battery,
- external power.

The power manager board handles all sources and allows seamless switching between them. For example, when the solar panel is attached, it will provide the power needed to run the system while the remaining power will be used to charge the battery.  When the external power supply is attached, the battery will charge quicker. Without solar or external power, the system uses only the battery.


## Requirements
The Orange Box can run autonomously and independently from other systems. However, to use all of its features, two additional elements should be present:
1. WiFi network (possibly with an Internet connection)
2. "Edge Device" computer with a known fixed IP address for collecting data.

## How it works?
When powered up, the Orange Box automatically connects to the WiFi network (if available), collects the latest version of the software from this GitHub repository (if an Internet connection is available), and starts data collection.

The data collection scripts run in an infinite loop waiting for MU3 measurement units ("Blue boxes") to appear on USB ports. When the Blue box is attached, the measurement interval is set and measurement starts after a few seconds. To stop the measurement, simply disconnect the Blue box. Every time a Blue box is (re)connected, a new .CSV file with measurement data is created in `/home/rock/measurements/CYBx/`, where `x` is the index of the corresponding USB port (0 for the left-most port, 1 for the center, and 2 for the right-most). New .CSV files are also created at noon and midnight to reduce the risk of data corruption and loss.

In addition to plant data gathered with Blue boxes, the Orange Box also saves the voltage and the current flow of the solar panel and the battery.

If a WiFi network and an Edge Device computer exist, plant and power measurements are also sent to the Edge Device in real time using the ZeroMQ protocol. The Edge Device must run the script for saving data (it does that with a similar folder structure as on the Orange Box) and can optionally run the program for real-time visualization.

## Additional features
This is a list of potential features that can run on the Orange Box in addition to its main data collection task. These features are partially developed but not yet activated.
* Collecting data from Phytonodes or similar devices via Bluetooth Low Energy (BLE).
* Collecting and routing data from devices equipped with Xbee shield using the Zigbee protocol.